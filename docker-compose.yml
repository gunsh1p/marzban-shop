version: '3.8'
services:
    bot:
        build: .
        restart: always
        stop_signal: SIGINT
        network_mode: host
        environment:
            BOT_TOKEN: ${BOT_TOKEN}
            SHOP_NAME: ${SHOP_NAME}
            ABOUT: ${ABOUT}
            RULES_LINK: ${RULES_LINK}
            KASSA_TOKEN: ${KASSA_TOKEN}
            CRYPTO_TOKEN: ${CRYPTO_TOKEN}
            DB_URL: ${DB_URL}
            PANEL_HOST: ${PANEL_HOST}
            PANEL_USER: ${PANEL_USER}
            PANEL_PASS: ${PANEL_PASS}
        volumes:
            - "./goods.json:/app/goods.json"
            - "./locales:/app/locales"
        depends_on:
            - db
    db:
        image: postgres:12-alpine
        restart: always
        environment:
            POSTGRES_USER: ${DB_USER}
            POSTGRES_PASSWORD: ${DB_PASS}
            POSTGRES_DB: ${DB_NAME}
        ports:
            - "5432:5432"
        volumes:
            - "./data/db:/var/lib/postgresql/data"